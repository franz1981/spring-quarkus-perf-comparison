name: state-array functions
scripts:
  state-array-push:
    - set-state:
        key: ${{array}}
        value: ${{=[...${{${{array}}¬[]}}, ${{value}}]}}
        separator: ¬

  state-array-calc-avg:
    - set-state:
        key: ${{var-name}}
        value: ${{=  (${{${{array}}}}.reduce((a, b) => a + b, 0) / ${{${{array}}}}.length) || 0 }}

  state-array-calc-max:
    - set-state:
        key: ${{var-name}}
        value: ${{=  Math.max(...${{${{array}}}}) }}